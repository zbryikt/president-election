var x$;x$=angular.module("main",[]),x$.controller("main",["$scope","$http"].concat(function(t,e){var r;return r=1,t.data={list:[]},t.fetch={detail:function(){var r;return(r=t.data.list.filter(function(t){return!t[2]})[0])?e({url:"http://crossorigin.me/"+r[1],method:"GET"}).success(function(e){var n;return n=$(e).find(".L_lmContent2").text(),r.push(n),t.fetch.detail()}):void 0},list:function(r){return console.log("fetch list page "+r),e({url:"http://crossorigin.me/http://www.pfp.org.tw/Article.asp?id=13&page="+r,method:"GET"}).success(function(e){var n,a,i,c,l,o,s,u,f,h;for(n=$(e).find("table[width=683] tr td a"),a=[],i=null,c=0,l=n.length;l>c;++c)o=n[c],s=/page=(\d+)/.exec(h),s&&parseInt(s[1])>r&&(i=parseInt(s[1])),u=[$(o).text(),$(o).attr("href")],f=u[0],h=u[1],/^article_show/.exec(h)&&/公開行程/.exec(f)&&a.push([$(o).text(),"http://www.pfp.org.tw/"+$(o).attr("href")]);return(u=t.data).list=u.list.concat(a),i&&10>i?t.fetch.list(i):t.fetch.detail()})}},t.fetch.list(1)}));